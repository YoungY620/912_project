# OS 2016 final sectum
## 一、判断题
1. T
2. T
3. F  可以因为失败而返回-1
4. T  每个进程有自己单独的虚拟地址空间
5. T
6. T
7. F  先段后页
8. T  页面共享
9. F  GDT指向的段寄存器需要更新，要设置CR0才能进入保护模式
10. F
11. T
12. T
13. F  多处理器不可以使用中断方法互斥同步
14. T
15. T
16. T
17. T  GPU大概可以一战
18. T
19. T  和磁盘不同U盘是随机存储
20. F  恰好相反
## 二、填空题
### 21
1）栈  2）寄存器  3）eax  4）`int 80`  5）cs   6）eip   7）eflags
### 22
1）链接  2）硬链接  3）软连接  4）硬链接  5）软连接  6）硬链接
### 23
1）RAID 0  2）RAID 1  3）3  4）校验

### 24 ？
1）int  2）执行  3）忽略  4）屏蔽
## 三、问答题
### 25
1)
|      | A    | B    | C    | D    |
| ---- | ---- | ---- | ---- | ---- |
| P0   | 0    | 0    | 0    | 0    |
| P1   | 0    | 7    | 5    | 0    |
| P2   | 1    | 0    | 0    | 2    |
| P3   | 0    | 0    | 2    | 0    |
| P4   | 0    | 6    | 4    | 2    |
2) 是
3) 能，判断过程如下
假设满足其需求，则need矩阵变为
|      | A    | B    | C    | D    |
| ---- | ---- | ---- | ---- | ---- |
| P0   | 0    | 0    | 0    | 0    |
| P1   | 0    | 3    | 3    | 0    |
| P2   | 1    | 0    | 0    | 2    |
| P3   | 0    | 0    | 2    | 0    |
| P4   | 0    | 6    | 4    | 2    |
可用资源向量为( 1, 1, 0, 0)
P0结束之后，可用资源向量为( 1, 1, 1, 2 )，可以满足P2需求
P2结束之后，可用资源向量为( 2, 4, 6, 6 )，可以满足P1和P3需求
P1和P3结束之后，可以满足P4需求，至此所有进程顺利结束
即分配后系统仍处于安全状态，可以直接满足此请求
### 26
1）错误，不满足空闲则入条件
当 j 退出临界区之后，i 也不使用临界区，则会导致 j 无法再次进入空的临界区
2）~~正确~~错误
面包房算法

- 想进入临界区需要先取号码，并按照号码从小到大（相等时进程序号从小到大）的顺序进入临界区
- 而退出临界区的时候将自己的号码清除

正确性需要添加什么条件：**保证判断号码大小之前相应进程没有在取号码**
- 在试图进入临界区时，检查所有优先级更高的进程的状态，当其均退出便可进入
- 由于任何两个进程的号码总是不同的，即使取号码时因为未互斥取到相同号码，也不至于相互等待
- 试图进入临界区时，尚未取号码的进程之后取到的号码一定大于此进程的号码
### 27
1）执行signal之后立即阻塞自己，为hoare管程

管程的特征如下
- 局部于管程的数据只能被局部于管程的过程所访问
- 一个进程只有通过调用管程内的过程才能进入管程访问共享数据
- 每次仅允许一个进程在管程内执行某个内部过程

2）
`cv[i]->count`只能为非负数，可以大于1，其值表示等待对应资源的进程个数
`mt->next_count`只能为非负数，可以大于1，表示执行signal之后临时让出管程并阻塞的进程个数
### 28
stride算法的思路：
- 每个进程有自己的pass值即每一步走的长度，其值由priority值决定，通常为MAX_PASS/priority
- 每个进程有自己的stride值，为其已经走过pass的长度之和
- 每次选择stride值最小的进程运行相等的时间片，并在运行完毕后使其stride+=pass

特征：
- 调度是确定的，即给定初始条件，即可确定其执行的顺序
- 每个进程被调度的次数正比于其priority

要点：stride的最大值大于最大步进值的两倍即可避免溢出带来的影响
用无符号数的方法做运算，用有符号数的方法理解运算结果
4位二进制数的例子：
MAX_PASS = 0111
考察初始情况a=b，判断a+pass > b是否成立
①a+s不溢出时，如a=0000
a+s = 0111; a+s-b = 0111 > 0
②a+s溢出时，如a=1010
a+s = 0001; a+s-b = 0001-1010=0101 > 0
那么，对于a<b但a+s>b的情况，显然总有“无符号数进行运算，其结果用有符号数表示”的结果可以体现出a与b的大小关系

### 29
1）有若干个直接索引指向数据块，一个间接索引指向间接索引块，块内的索引指向数据块
2） `16*1KB + (1KB/4B)*1KB = 272 KB`