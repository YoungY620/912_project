# OS 2018 mid sectum
## 一、对错题
1. X  无需切换页表，只需切换栈
2. V
3. X
4. V
5. X
6. V
7. X
8. X
9. V  fork出来的子进程再次进行fork然后失败的情况
10. V
## 二、填空题
### 1）
1. pwd
2. gcc
3. qemu
### 2）
1. 实
2. GDT（全局描述符表）
3. 保护
4. IDT（中断描述符表） 
5. 门
6. 段
### 3）
1. CR3
2. 4k
3. 4k
4. 4k
5. CR2
### 4）
1. 0
2. 24
### 5）
1. 用户
2. 内核
3. proc_struct
4. 就绪
5. 运行
6. 等待
7. 就绪挂起
8. 等待挂起
## 三、问答
### 1）
- 每有一个i=10的进程，就执行一次magic()
- 从fork返回时，变量i的值为k的进程有2^(k+1)个，然后i自增

故总执行1024次magic()
会因为进程控制块等数据结构及用户栈、内核栈消耗所有空间而导致溢出

### 2）
1. 不需要，因为用户线程管理库函数已经完成了线程的管理，而资源分配以进程为单位，故操作系统内核无须和用户线程打交道
2. 不需要，用户线程管理库函数可以基于TCB（线程控制块）实现线程状态的保存和恢复
3. 不可以，如果要“随时”打断，则必须通过中断来实现，需要进入内核态处理。不通过内核无法实现基于线程的处理机抢占，只能由当前运行线程主动放弃
### 3）
1. 2362H：10+100+100=210ns
访问TLB未命中，访问主存中的页表，再访问主存
1565H：10+100+10^7+10+100=10000220ns
访问TLB未命中，访问主存中的页表未命中，缺页处理，访问TLB命中，访问主存
25A5H：10+100=110ns
访问TLB命中，访问主存
2. 123565H
页号为1的虚拟页缺页时，上次访问的为2号页，故根据LRU将0号页置换出去，根据局部淘汰策略继承页框号为123H的物理页

### 4）RISC-V没学